---
interface Props {
  videoUrl: string;
}

const { videoUrl } = Astro.props;

// Логика, чтобы достать ID из любой ссылки YouTube
let videoId = '';
const url = new URL(videoUrl);
if (url.hostname === 'youtu.be') {
  videoId = url.pathname.slice(1);
} else if (url.hostname === 'www.youtube.com' || url.hostname === 'youtube.com') {
  videoId = url.searchParams.get('v') ?? '';
}

const thumbnailUrl = `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg`;
---

<div
  class="video-thumb-container group relative aspect-video w-full rounded-lg shadow-xl overflow-hidden border-2 border-cyan-500/30"
  data-modal-trigger="videoModal"
  data-video-src={videoId}
>
  <img
    src={thumbnailUrl}
    alt="Превью видео"
    class="absolute inset-0 w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
    loading="lazy"
  />
  <div class="absolute inset-0 bg-transparent group-hover:bg-black/50 transition-colors"></div>
  <div class="absolute inset-0 flex items-center justify-center">
    <i class="fas fa-play text-white text-5xl opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all duration-300"></i>
  </div>
</div>

<style>
.video-thumb-container {
  cursor: pointer;
}
</style>